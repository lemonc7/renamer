import{b as D,i as re,_ as M,d as _,u as oe,a as O,r as U,o as le,c as B,e as y,f as E,g as n,n as b,p as Q,h as C,j as X,k as ie,l as Y,m as k,w as d,q as V,E as ce,t as T,s as L,v as ue,x as G,y as W,z as H,A as R,B as S,C as J,D as de,F as Z,G as pe,H as me,I as o,J as fe,K as ye,L as ge,M as he,N as be,O as _e,P as A,Q as $e,R as i,S as F,T as we,U as ve,V as Be,W as K,X as Ce,Y as Ee,Z as Se,$ as Ne}from"./index-C6rTuxDF.js";const z=Symbol("breadcrumbKey"),Fe=D({separator:{type:String,default:"/"},separatorIcon:{type:re}}),ke=_({name:"ElBreadcrumb"}),Pe=_({...ke,props:Fe,setup(m){const e=m,{t:a}=oe(),l=O("breadcrumb"),f=U();return Q(z,e),le(()=>{const p=f.value.querySelectorAll(`.${l.e("item")}`);p.length&&p[p.length-1].setAttribute("aria-current","page")}),(p,r)=>(y(),B("div",{ref_key:"breadcrumb",ref:f,class:b(n(l).b()),"aria-label":n(a)("el.breadcrumb.label"),role:"navigation"},[E(p.$slots,"default")],10,["aria-label"]))}});var je=M(Pe,[["__file","breadcrumb.vue"]]);const Ie=D({to:{type:C([String,Object]),default:""},replace:Boolean}),Re=_({name:"ElBreadcrumbItem"}),Te=_({...Re,props:Ie,setup(m){const e=m,a=ie(),l=X(z,void 0),f=O("breadcrumb"),p=a.appContext.config.globalProperties.$router,r=U(),N=()=>{!e.to||!p||(e.replace?p.replace(e.to):p.push(e.to))};return(P,u)=>{var $,t;return y(),B("span",{class:b(n(f).e("item"))},[Y("span",{ref_key:"link",ref:r,class:b([n(f).e("inner"),n(f).is("link",!!P.to)]),role:"link",onClick:N},[E(P.$slots,"default")],2),($=n(l))!=null&&$.separatorIcon?(y(),k(n(ce),{key:0,class:b(n(f).e("separator"))},{default:d(()=>[(y(),k(V(n(l).separatorIcon)))]),_:1},8,["class"])):(y(),B("span",{key:1,class:b(n(f).e("separator")),role:"presentation"},T((t=n(l))==null?void 0:t.separator),3))],2)}}});var ee=M(Te,[["__file","breadcrumb-item.vue"]]);const De=L(je,{BreadcrumbItem:ee}),Me=ue(ee),Oe=D({header:{type:String,default:""},footer:{type:String,default:""},bodyStyle:{type:C([String,Object,Array]),default:""},headerClass:String,bodyClass:String,footerClass:String,shadow:{type:String,values:["always","hover","never"],default:"always"}}),Ae=_({name:"ElCard"}),He=_({...Ae,props:Oe,setup(m){const e=O("card");return(a,l)=>(y(),B("div",{class:b([n(e).b(),n(e).is(`${a.shadow}-shadow`)])},[a.$slots.header||a.header?(y(),B("div",{key:0,class:b([n(e).e("header"),a.headerClass])},[E(a.$slots,"header",{},()=>[H(T(a.header),1)])],2)):G("v-if",!0),Y("div",{class:b([n(e).e("body"),a.bodyClass]),style:W(a.bodyStyle)},[E(a.$slots,"default")],6),a.$slots.footer||a.footer?(y(),B("div",{key:1,class:b([n(e).e("footer"),a.footerClass])},[E(a.$slots,"footer",{},()=>[H(T(a.footer),1)])],2)):G("v-if",!0)],2))}});var Le=M(He,[["__file","card.vue"]]);const xe=L(Le),Ke=D({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:C([Number,Object]),default:()=>R({})},sm:{type:C([Number,Object]),default:()=>R({})},md:{type:C([Number,Object]),default:()=>R({})},lg:{type:C([Number,Object]),default:()=>R({})},xl:{type:C([Number,Object]),default:()=>R({})}}),te=Symbol("rowContextKey"),Ve=_({name:"ElCol"}),We=_({...Ve,props:Ke,setup(m){const e=m,{gutter:a}=X(te,{gutter:S(()=>0)}),l=O("col"),f=S(()=>{const r={};return a.value&&(r.paddingLeft=r.paddingRight=`${a.value/2}px`),r}),p=S(()=>{const r=[];return["span","offset","pull","push"].forEach(u=>{const $=e[u];J($)&&(u==="span"?r.push(l.b(`${e[u]}`)):$>0&&r.push(l.b(`${u}-${e[u]}`)))}),["xs","sm","md","lg","xl"].forEach(u=>{J(e[u])?r.push(l.b(`${u}-${e[u]}`)):de(e[u])&&Object.entries(e[u]).forEach(([$,t])=>{r.push($!=="span"?l.b(`${u}-${$}-${t}`):l.b(`${u}-${t}`))})}),a.value&&r.push(l.is("guttered")),[l.b(),r]});return(r,N)=>(y(),k(V(r.tag),{class:b(n(p)),style:W(n(f))},{default:d(()=>[E(r.$slots,"default")]),_:3},8,["class","style"]))}});var qe=M(We,[["__file","col.vue"]]);const Ge=L(qe),Je=["start","center","end","space-around","space-between","space-evenly"],Ue=["top","middle","bottom"],Qe=D({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:Je,default:"start"},align:{type:String,values:Ue}}),Xe=_({name:"ElRow"}),Ye=_({...Xe,props:Qe,setup(m){const e=m,a=O("row"),l=S(()=>e.gutter);Q(te,{gutter:l});const f=S(()=>{const r={};return e.gutter&&(r.marginRight=r.marginLeft=`-${e.gutter/2}px`),r}),p=S(()=>[a.b(),a.is(`justify-${e.justify}`,e.justify!=="start"),a.is(`align-${e.align}`,!!e.align)]);return(r,N)=>(y(),k(V(r.tag),{class:b(n(p)),style:W(n(f))},{default:d(()=>[E(r.$slots,"default")]),_:3},8,["class","style"]))}});var Ze=M(Ye,[["__file","row.vue"]]);const ze=L(Ze);function et(m,e=Z()){e.selectFiles=m,m.length!==0?e.hiddenFilesHandlingButton=!1:e.hiddenFilesHandlingButton=!0;let a=0;m.forEach(l=>{l.isDir&&a++}),a>0?e.hiddenModeButton=!1:e.hiddenModeButton=!0,m.length===1?e.hiddenRenameButton=!1:e.hiddenRenameButton=!0}const tt={class:"container"},at=_({__name:"Home",setup(m){const e=Z(),a=pe(),l=Be(),f=async()=>{try{let{value:t}=await A.prompt("请输入文件夹名称","Tip",{confirmButtonText:"确认",cancelButtonText:"返回",inputPattern:/^[^\s\/\0]+$/,inputErrorMessage:"无效的名称"});try{await $e(a.path+"/"+t),i.success("创建成功"),F(a.path,e)}catch(s){i.error(`${s instanceof Error?s.message:String(s)}`)}}catch{i.info("操作取消")}},p=async()=>{try{await A.confirm("确认删除文件/目录?","Warning",{confirmButtonText:"确认",cancelButtonText:"返回",type:"warning"});let t=e.selectFiles.map(s=>s.name);try{await we(a.path,t),i.success("成功删除"),F(a.path,e)}catch(s){i.error(`${s instanceof Error?s.message:String(s)}`)}}catch{i.info("删除取消")}},r=async()=>{try{let{value:t}=await A.prompt("请输入新名称","Tip",{confirmButtonText:"确认",cancelButtonText:"返回",inputPattern:/^[^\s\/\0]+$/,inputErrorMessage:"无效的名称",inputValue:e.selectFiles[0].name}),s=[{dirName:"",filesName:[{oldName:e.selectFiles[0].name,newName:t}]}];if(e.selectFiles[0].name!==t)try{await ve(a.path,s),i.success("重命名成功"),F(a.path,e)}catch(c){i.error(`${c instanceof Error?c.message:String(c)}`)}else i.warning("新名称与旧名称一致")}catch{i.info("操作取消")}},N=async t=>{if(t.isDir){let s=`${a.path}/${t.name}`.replace(/\/+/g,"/");try{await F(s,e),l.push(s)}catch(c){i.error(`${c instanceof Error?c.message:String(c)}`)}}},P=S(()=>{const t=a.path.split("/").filter(w=>w).map(decodeURIComponent),s=[];let c=8;return t.length<=4?t.forEach((w,v)=>{s.push({name:w.length>c?w.slice(0,c)+"...":w,fullName:w,to:v===t.length-1?null:`/${t.slice(0,v+1).join("/")}`})}):(s.push({name:t[0].length>c?t[0].slice(0,c)+"...":t[0],fullName:t[0],to:`/${t[0]}`}),s.push({name:"...",fullName:t.slice(1,-3).join("/"),to:null}),t.slice(-3).forEach((v,j)=>{let h=t.length-3+j;s.push({name:v.length>c?v.slice(0,c)+"...":v,fullName:v,to:j===2?null:`/${t.slice(0,h+1).join("/")}`})})),s});me(()=>a.path,async t=>{try{await F("/"+(t||"/"),e)}catch(s){i.error(`${s instanceof Error?s.message:String(s)}`)}finally{e.hiddenModeButton=!0,e.selectFiles=[],e.hiddenFilesHandlingButton=!0,e.hiddenRenameButton=!0}},{immediate:!0});const u=t=>{try{let s=e.selectFiles.map(c=>c.name);e.loadFilesName=s,e.originalPath=a.path,t?(K("warning",e),i.success("复制成功")):(K("danger",e),i.success("剪切成功"))}catch(s){e.loadFilesName=[],e.originalPath="",i.error(`${s instanceof Error?s.message:String(s)}`)}},$=async()=>{if(e.loadFilesName.length===0&&e.originalPath==="")i.error("没有选中文件");else try{await A.confirm("确认复制/移动文件？","Warning",{confirmButtonText:"确认",cancelButtonText:"返回",type:"warning"});try{e.showPasteButton.type==="warning"?(await Ce(e.originalPath,a.path,e.loadFilesName),i.success("复制成功")):e.showPasteButton.type==="danger"?(await Ee(e.originalPath,a.path,e.loadFilesName),i.success("移动成功")):i.warning("没有识别到操作")}catch(t){i.error(`${t instanceof Error?t.message:String(t)}`)}}catch{i.info("操作取消")}finally{e.loadFilesName=[],e.originalPath="",K("",e),F(a.path,e)}};return(t,s)=>{const c=Se,w=Me,v=De,j=Ge,h=he,x=ge,ae=ze,I=_e,se=be,ne=xe;return y(),B("div",tt,[o(ne,{class:"home",shadow:"hover"},{default:d(()=>[o(ae,{class:"header"},{default:d(()=>[o(j,{span:12},{default:d(()=>[(y(),k(v,{separator:"/",key:t.$route.path},{default:d(()=>[(y(!0),B(fe,null,ye(P.value,(g,q)=>(y(),k(w,{key:q,to:g.to},{default:d(()=>[o(c,{content:g.fullName,placement:"top",effect:"light"},{default:d(()=>[H(T(g.name),1)]),_:2},1032,["content"])]),_:2},1032,["to"]))),128))]),_:1}))]),_:1}),o(j,{span:12,class:"button-group"},{default:d(()=>[o(x,null,{default:d(()=>[o(h,{type:"primary",plain:"",icon:"ArrowLeft",title:"上一级",onClick:s[0]||(s[0]=g=>t.$router.go(-1))}),o(h,{type:"primary",plain:"",icon:"ArrowRight",title:"下一级",onClick:s[1]||(s[1]=g=>t.$router.go(1))})]),_:1}),o(x,null,{default:d(()=>[o(h,{type:"primary",plain:"",icon:"FolderAdd",title:"新建文件夹",onClick:f}),o(h,{type:"danger",plain:"",icon:"Delete",title:"删除文件",onClick:p,disabled:n(e).hiddenFilesHandlingButton},null,8,["disabled"]),o(h,{type:"primary",icon:"edit",title:"重命名",plain:"",onClick:r,disabled:n(e).hiddenRenameButton},null,8,["disabled"])]),_:1}),o(x,null,{default:d(()=>[o(h,{type:"primary",plain:"",icon:"CopyDocument",title:"复制",onClick:s[2]||(s[2]=g=>u(!0)),disabled:n(e).hiddenFilesHandlingButton},null,8,["disabled"]),o(h,{type:n(e).showPasteButton.type,plain:"",icon:"Checked",title:"粘贴",disabled:!n(e).showPasteButton.show,onClick:$},null,8,["type","disabled"]),o(h,{type:"primary",plain:"",icon:"Scissor",title:"剪切",onClick:s[3]||(s[3]=g=>u(!1)),disabled:n(e).hiddenFilesHandlingButton},null,8,["disabled"])]),_:1})]),_:1})]),_:1}),o(se,{data:n(e).fileList,"empty-text":"无文件",onSelectionChange:s[4]||(s[4]=g=>n(et)(g,n(e)))},{default:d(()=>[o(I,{type:"selection"}),o(I,{label:"名称",prop:"name",width:"600"},{default:d(({row:g})=>[o(h,{class:"fileSelect",icon:g.isDir?"Folder":"Document",onClick:q=>N(g),plain:""},{default:d(()=>[H(T(g.name),1)]),_:2},1032,["icon","onClick"])]),_:1}),o(I,{label:"类型",prop:"type",width:"100"}),o(I,{label:"大小",prop:"size",width:"100"}),o(I,{label:"修改时间",prop:"modTime"})]),_:1},8,["data"])]),_:1})])}}}),nt=Ne(at,[["__scopeId","data-v-00c7c90e"]]);export{nt as default};
