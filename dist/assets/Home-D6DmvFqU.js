import{b as D,i as oe,_ as M,d as _,u as re,a as O,r as J,o as le,c as C,e as y,f as E,g as n,n as b,p as Q,h as B,j as X,k as ie,l as Y,m as k,w as d,q as K,E as ce,t as T,s as L,v as ue,x as q,y as V,z as H,A as j,B as S,C as G,D as de,F as Z,G as pe,H as me,I as r,J as fe,K as ye,L as ge,M as he,N as be,O as _e,P as A,Q as $e,R as i,S as F,T as we,U as ve,V as Ce,W as x,X as Be,Y as Ee,Z as Se,$ as Ne}from"./index-B6nB9nPX.js";const z=Symbol("breadcrumbKey"),Fe=D({separator:{type:String,default:"/"},separatorIcon:{type:oe}}),ke=_({name:"ElBreadcrumb"}),Ie=_({...ke,props:Fe,setup(m){const e=m,{t:a}=re(),l=O("breadcrumb"),f=J();return Q(z,e),le(()=>{const p=f.value.querySelectorAll(`.${l.e("item")}`);p.length&&p[p.length-1].setAttribute("aria-current","page")}),(p,o)=>(y(),C("div",{ref_key:"breadcrumb",ref:f,class:b(n(l).b()),"aria-label":n(a)("el.breadcrumb.label"),role:"navigation"},[E(p.$slots,"default")],10,["aria-label"]))}});var Pe=M(Ie,[["__file","breadcrumb.vue"]]);const Re=D({to:{type:B([String,Object]),default:""},replace:Boolean}),je=_({name:"ElBreadcrumbItem"}),Te=_({...je,props:Re,setup(m){const e=m,a=ie(),l=X(z,void 0),f=O("breadcrumb"),p=a.appContext.config.globalProperties.$router,o=J(),N=()=>{!e.to||!p||(e.replace?p.replace(e.to):p.push(e.to))};return(I,u)=>{var $,t;return y(),C("span",{class:b(n(f).e("item"))},[Y("span",{ref_key:"link",ref:o,class:b([n(f).e("inner"),n(f).is("link",!!I.to)]),role:"link",onClick:N},[E(I.$slots,"default")],2),($=n(l))!=null&&$.separatorIcon?(y(),k(n(ce),{key:0,class:b(n(f).e("separator"))},{default:d(()=>[(y(),k(K(n(l).separatorIcon)))]),_:1},8,["class"])):(y(),C("span",{key:1,class:b(n(f).e("separator")),role:"presentation"},T((t=n(l))==null?void 0:t.separator),3))],2)}}});var ee=M(Te,[["__file","breadcrumb-item.vue"]]);const De=L(Pe,{BreadcrumbItem:ee}),Me=ue(ee),Oe=D({header:{type:String,default:""},footer:{type:String,default:""},bodyStyle:{type:B([String,Object,Array]),default:""},headerClass:String,bodyClass:String,footerClass:String,shadow:{type:String,values:["always","hover","never"],default:"always"}}),Ae=_({name:"ElCard"}),He=_({...Ae,props:Oe,setup(m){const e=O("card");return(a,l)=>(y(),C("div",{class:b([n(e).b(),n(e).is(`${a.shadow}-shadow`)])},[a.$slots.header||a.header?(y(),C("div",{key:0,class:b([n(e).e("header"),a.headerClass])},[E(a.$slots,"header",{},()=>[H(T(a.header),1)])],2)):q("v-if",!0),Y("div",{class:b([n(e).e("body"),a.bodyClass]),style:V(a.bodyStyle)},[E(a.$slots,"default")],6),a.$slots.footer||a.footer?(y(),C("div",{key:1,class:b([n(e).e("footer"),a.footerClass])},[E(a.$slots,"footer",{},()=>[H(T(a.footer),1)])],2)):q("v-if",!0)],2))}});var Le=M(He,[["__file","card.vue"]]);const Ue=L(Le),xe=D({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:B([Number,Object]),default:()=>j({})},sm:{type:B([Number,Object]),default:()=>j({})},md:{type:B([Number,Object]),default:()=>j({})},lg:{type:B([Number,Object]),default:()=>j({})},xl:{type:B([Number,Object]),default:()=>j({})}}),te=Symbol("rowContextKey"),Ke=_({name:"ElCol"}),Ve=_({...Ke,props:xe,setup(m){const e=m,{gutter:a}=X(te,{gutter:S(()=>0)}),l=O("col"),f=S(()=>{const o={};return a.value&&(o.paddingLeft=o.paddingRight=`${a.value/2}px`),o}),p=S(()=>{const o=[];return["span","offset","pull","push"].forEach(u=>{const $=e[u];G($)&&(u==="span"?o.push(l.b(`${e[u]}`)):$>0&&o.push(l.b(`${u}-${e[u]}`)))}),["xs","sm","md","lg","xl"].forEach(u=>{G(e[u])?o.push(l.b(`${u}-${e[u]}`)):de(e[u])&&Object.entries(e[u]).forEach(([$,t])=>{o.push($!=="span"?l.b(`${u}-${$}-${t}`):l.b(`${u}-${t}`))})}),a.value&&o.push(l.is("guttered")),[l.b(),o]});return(o,N)=>(y(),k(K(o.tag),{class:b(n(p)),style:V(n(f))},{default:d(()=>[E(o.$slots,"default")]),_:3},8,["class","style"]))}});var We=M(Ve,[["__file","col.vue"]]);const qe=L(We),Ge=["start","center","end","space-around","space-between","space-evenly"],Je=["top","middle","bottom"],Qe=D({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:Ge,default:"start"},align:{type:String,values:Je}}),Xe=_({name:"ElRow"}),Ye=_({...Xe,props:Qe,setup(m){const e=m,a=O("row"),l=S(()=>e.gutter);Q(te,{gutter:l});const f=S(()=>{const o={};return e.gutter&&(o.marginRight=o.marginLeft=`-${e.gutter/2}px`),o}),p=S(()=>[a.b(),a.is(`justify-${e.justify}`,e.justify!=="start"),a.is(`align-${e.align}`,!!e.align)]);return(o,N)=>(y(),k(K(o.tag),{class:b(n(p)),style:V(n(f))},{default:d(()=>[E(o.$slots,"default")]),_:3},8,["class","style"]))}});var Ze=M(Ye,[["__file","row.vue"]]);const ze=L(Ze);function et(m,e=Z()){e.selectFiles=m,m.length!==0?e.hiddenFilesHandlingButton=!1:e.hiddenFilesHandlingButton=!0;let a=0;m.forEach(l=>{l.isDir&&a++}),a>0?e.hiddenModeButton=!1:e.hiddenModeButton=!0,m.length===1?e.hiddenRenameButton=!1:e.hiddenRenameButton=!0}const tt={class:"container"},at=_({__name:"Home",setup(m){const e=Z(),a=pe(),l=Ce(),f=async()=>{try{let{value:t}=await A.prompt("请输入文件夹名称","Tip",{confirmButtonText:"确认",cancelButtonText:"返回",inputPattern:/^[^\s\/\0]+$/,inputErrorMessage:"无效的名称"});try{await $e(a.path+"/"+t),i.success("创建成功"),F(a.path,e)}catch(s){i.error(`${s instanceof Error?s.message:String(s)}`)}}catch{i.info("操作取消")}},p=async()=>{try{await A.confirm("确认删除文件/目录?","Warning",{confirmButtonText:"确认",cancelButtonText:"返回",type:"warning"});let t=e.selectFiles.map(s=>s.name);try{await we(a.path,t),i.success("成功删除"),F(a.path,e)}catch(s){i.error(`${s instanceof Error?s.message:String(s)}`)}}catch{i.info("删除取消")}},o=async()=>{try{let{value:t}=await A.prompt("请输入新名称","Tip",{confirmButtonText:"确认",cancelButtonText:"返回",inputPattern:/^[^\s\/\0]+$/,inputErrorMessage:"无效的名称",inputValue:e.selectFiles[0].name}),s=[{dirName:"",filesName:[{oldName:e.selectFiles[0].name,newName:t}]}];if(e.selectFiles[0].name!==t)try{await ve(decodeURIComponent(a.path),s),i.success("重命名成功"),F(decodeURIComponent(a.path),e)}catch(c){i.error(`${c instanceof Error?c.message:String(c)}`)}else i.warning("新名称与旧名称一致")}catch{i.info("操作取消")}},N=async t=>{if(t.isDir){let s=`${a.path}/${t.name}`.replace(/\/+/g,"/");try{await F(decodeURIComponent(s),e),l.push(s)}catch(c){i.error(`${c instanceof Error?c.message:String(c)}`)}}},I=S(()=>{const t=a.path.split("/").filter(w=>w).map(decodeURIComponent),s=[];let c=8;return t.length<=4?t.forEach((w,v)=>{s.push({name:w.length>c?w.slice(0,c)+"...":w,fullName:w,to:v===t.length-1?null:`/${t.slice(0,v+1).join("/")}`})}):(s.push({name:t[0].length>c?t[0].slice(0,c)+"...":t[0],fullName:t[0],to:`/${t[0]}`}),s.push({name:"...",fullName:t.slice(1,-3).join("/"),to:null}),t.slice(-3).forEach((v,P)=>{let h=t.length-3+P;s.push({name:v.length>c?v.slice(0,c)+"...":v,fullName:v,to:P===2?null:`/${t.slice(0,h+1).join("/")}`})})),s});me(()=>a.path,async t=>{try{let s=decodeURIComponent("/"+(t||"/"));await F(s,e)}catch(s){i.error(`${s instanceof Error?s.message:String(s)}`)}finally{e.hiddenModeButton=!0,e.selectFiles=[],e.hiddenFilesHandlingButton=!0,e.hiddenRenameButton=!0}},{immediate:!0});const u=t=>{try{let s=e.selectFiles.map(c=>c.name);e.loadFilesName=s,e.originalPath=a.path,t?(x("warning",e),i.success("复制成功")):(x("danger",e),i.success("剪切成功"))}catch(s){e.loadFilesName=[],e.originalPath="",i.error(`${s instanceof Error?s.message:String(s)}`)}},$=async()=>{if(e.loadFilesName.length===0&&e.originalPath==="")i.error("没有选中文件");else try{await A.confirm("确认复制/移动文件？","Warning",{confirmButtonText:"确认",cancelButtonText:"返回",type:"warning"});try{e.showPasteButton.type==="warning"?(await Be(e.originalPath,decodeURIComponent(a.path),e.loadFilesName),i.success("复制成功")):e.showPasteButton.type==="danger"?(await Ee(e.originalPath,decodeURIComponent(a.path),e.loadFilesName),i.success("移动成功")):i.warning("没有识别到操作")}catch(t){i.error(`${t instanceof Error?t.message:String(t)}`)}}catch{i.info("操作取消")}finally{e.loadFilesName=[],e.originalPath="",x("",e),F(a.path,e)}};return(t,s)=>{const c=Se,w=Me,v=De,P=qe,h=he,U=ge,ae=ze,R=_e,se=be,ne=Ue;return y(),C("div",tt,[r(ne,{class:"home",shadow:"hover"},{default:d(()=>[r(ae,{class:"header"},{default:d(()=>[r(P,{span:12},{default:d(()=>[(y(),k(v,{separator:"/",key:t.$route.path},{default:d(()=>[(y(!0),C(fe,null,ye(I.value,(g,W)=>(y(),k(w,{key:W,to:g.to},{default:d(()=>[r(c,{content:g.fullName,placement:"top",effect:"light"},{default:d(()=>[H(T(g.name),1)]),_:2},1032,["content"])]),_:2},1032,["to"]))),128))]),_:1}))]),_:1}),r(P,{span:12,class:"button-group"},{default:d(()=>[r(U,null,{default:d(()=>[r(h,{type:"primary",plain:"",icon:"ArrowLeft",title:"上一级",onClick:s[0]||(s[0]=g=>t.$router.go(-1))}),r(h,{type:"primary",plain:"",icon:"ArrowRight",title:"下一级",onClick:s[1]||(s[1]=g=>t.$router.go(1))})]),_:1}),r(U,null,{default:d(()=>[r(h,{type:"primary",plain:"",icon:"FolderAdd",title:"新建文件夹",onClick:f}),r(h,{type:"danger",plain:"",icon:"Delete",title:"删除文件",onClick:p,disabled:n(e).hiddenFilesHandlingButton},null,8,["disabled"]),r(h,{type:"primary",icon:"edit",title:"重命名",plain:"",onClick:o,disabled:n(e).hiddenRenameButton},null,8,["disabled"])]),_:1}),r(U,null,{default:d(()=>[r(h,{type:"primary",plain:"",icon:"CopyDocument",title:"复制",onClick:s[2]||(s[2]=g=>u(!0)),disabled:n(e).hiddenFilesHandlingButton},null,8,["disabled"]),r(h,{type:n(e).showPasteButton.type,plain:"",icon:"Checked",title:"粘贴",disabled:!n(e).showPasteButton.show,onClick:$},null,8,["type","disabled"]),r(h,{type:"primary",plain:"",icon:"Scissor",title:"剪切",onClick:s[3]||(s[3]=g=>u(!1)),disabled:n(e).hiddenFilesHandlingButton},null,8,["disabled"])]),_:1})]),_:1})]),_:1}),r(se,{data:n(e).fileList,"empty-text":"无文件",onSelectionChange:s[4]||(s[4]=g=>n(et)(g,n(e)))},{default:d(()=>[r(R,{type:"selection"}),r(R,{label:"名称",prop:"name",width:"600"},{default:d(({row:g})=>[r(h,{class:"fileSelect",icon:g.isDir?"Folder":"Document",onClick:W=>N(g),plain:""},{default:d(()=>[H(T(g.name),1)]),_:2},1032,["icon","onClick"])]),_:1}),r(R,{label:"类型",prop:"type",width:"100"}),r(R,{label:"大小",prop:"size",width:"100"}),r(R,{label:"修改时间",prop:"modTime"})]),_:1},8,["data"])]),_:1})])}}}),nt=Ne(at,[["__scopeId","data-v-09c54099"]]);export{nt as default};
